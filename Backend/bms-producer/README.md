# Swagger generated server

Spring Boot Server 


## Overview  
This server was generated by the [swagger-codegen](https://github.com/swagger-api/swagger-codegen) project.  
By using the [OpenAPI-Spec](https://github.com/swagger-api/swagger-core), you can easily generate a server stub.  
This is an example of building a swagger-enabled server in Java using the SpringBoot framework.

The underlying library integrating swagger to SpringBoot is [springdoc-openapi](https://github.com/springdoc/springdoc-openapi)

To Run the application locally
create eventhub namespace in azure and then create patient and hospital events, if you choose to create differently named events you can configure the following env variables
SPRING_CLOUD_STREAM_PATIENT_DESTINATION
SPRING_CLOUD_STREAM_HOSPITAL_DESTINATION

Configure the connection string from "shared access policy" in the event hub to the  
SPRING_CLOUD_AZURE_EVENTHUB_CONNECTION_STRING 
env variable

create a storage account in azure
configure the name and accesskey to the following env variables
SPRING_CLOUD_AZURE_CHECKPOINT_STORAGE_ACCOUNT
SPRING_CLOUD_AZURE_CHECKPOINT_ACCESS_KEY

after the configuration is done run the application using
```shell
mvn spring-boot:run
```
The swagger doc will be available at
http://localhost:8090/gok/bms/1.0.0

To run the application in kubernetes 
Build a docker image and push it to a registry
```shell
docker build . -t bms
docker tag bms:latest registry:tag
docker push registry:tag
```
configure the kubernetes manifests secrets, configmap and deployment files with appropriate values, (secrets needs base64 encoded string)
and run to deploy the application

```shell
kubectl apply -f kubernetes
```



